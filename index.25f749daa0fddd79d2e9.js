/*! For license information please see index.25f749daa0fddd79d2e9.js.LICENSE.txt */
(()=>{"use strict";function t(t){if(null===t)throw new Error("Element was not found!");if(!(t instanceof HTMLElement))throw new TypeError("Element is not HTML!");return t}function e(t,e,i,s,...a){const r=document.createElement(`${t}`);if(r.classList.add(e),s&&(r.textContent=`${s}`),a.length)for(let t=0;t<a.length;t++)r.setAttribute(`${a[t][0]}`,`${a[t][1]}`);return i.append(r),r}class i{constructor(){this.container=document.createElement("header"),this.container.classList.add("header");const t=e("div","container",this.container),i=e("nav","header__nav",t),s=e("ul","header__list",i),a=e("li","header__item",s);this.logoLink=e("a","header__logo",a,"Music"),e("span","header__logo-span",this.logoLink,"World");const r=e("li","header__item",s),n=e("p","header__total",r,"Total: $");this.totalAmountHtml=e("span","header__total-amount",n,"0"),this._totalAmount=0,this.basket=e("a","header__basket",r),e("img","as",this.basket,void 0,["src","./assets/img/basket.png"],["alt","shopping basket"]),this.basketScoreHml=e("div","basket-score",this.basket),this._basketScoreAmount=0,this.basketScoreHml.innerText=this._basketScoreAmount.toString()}set totalAmount(t){this._totalAmount=t,this.totalAmountHtml.innerText=this._totalAmount.toString()}set basketScoreAmount(t){this._basketScoreAmount=t,this.basketScoreHml.innerText=this._basketScoreAmount.toString()}}class s{constructor(){if(this.container=document.createElement("input"),this.container.classList.add("main-page__search"),this.container.setAttribute("placeholder","Search"),this.container.setAttribute("type","Search"),localStorage.getItem("mainObj")){const t=JSON.parse(localStorage.getItem("mainObj")).search;this.container.value=t}this.searchValue=this.container.value,this.container.addEventListener("input",(()=>{this.searchValue=this.container.value}))}}class a{constructor(t){this.body=t,this.restAndCopyBody=e("div","reset-copy",this.body),e("h2","reset-copy__title",this.restAndCopyBody,"Product Filters").classList.add("subtitle"),this.resetButton=e("button","reset-copy__reset",this.restAndCopyBody,"Reset"),this.copyButton=e("button","reset-copy__copy",this.restAndCopyBody,"Copy Link"),this.resetButton.classList.add("button"),this.copyButton.classList.add("button")}}class r{constructor(t,e,i){this.body=t,this.arr=e,this.str=i,this._inputCategoryArr=[],this.inputsArr=[],this.isLocalStorageTrue()}isLocalStorageTrue(){localStorage.getItem("mainObj")&&("Category"===this.str&&(this._inputCategoryArr=JSON.parse(localStorage.getItem("mainObj")).category),"Brand"===this.str&&(this._inputCategoryArr=JSON.parse(localStorage.getItem("mainObj")).brand))}createAll(){const t=e("div","cub-category",this.body);e("h2","cub-category__title",t,`${this.str}`).classList.add("subtitle");for(let i=0;i<this.arr.length;i++){const s=e("div","cub-category__input-cb",t),a=e("input","cub-category__input",s,void 0,["type","checkbox"],["id",`${this.arr[i]}`]);this._inputCategoryArr.indexOf(this.arr[i])>=0&&(a.checked=!0),a.addEventListener("input",(()=>{this._inputCategoryArr.includes(this.arr[i])?this._inputCategoryArr.splice(this._inputCategoryArr.indexOf(this.arr[i]),1):this._inputCategoryArr.push(this.arr[i])})),this.inputsArr.push(a),e("label","cub-category__label",s,`${this.arr[i]}`,["for",`${this.arr[i]}`])}}}const n=[{id:1,title:"Ibanez Gio GRG121DX-WNF Walnut Flat",description:"Electric guitar, okoume body, maple neck, amaranth fretboard, IBZ-6 humbucker, F106 fixed bridge, die-cast tuners",price:164,discountPercentage:12.96,rating:4.9,stock:14,brand:"Ibanez",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/ibanez-gio-grg121dx-wnf-walnut-flat_1_GIT0037827-000.jpg",images:["https://images.musicstore.de/images/1600/ibanez-gio-grg121dx-wnf-walnut-flat_1_GIT0037827-000.jpg","https://images.musicstore.de/images/1600/ibanez-gio-grg121dx-wnf-walnut-flat_4_GIT0037827-000.jpg","https://images.musicstore.de/images/1600/ibanez-gio-grg121dx-wnf-walnut-flat_3_GIT0037827-000.jpg"]},{id:2,title:"Ibanez j.custom JCRG2104",description:"The Ibanez j.custom JCRG2104 #I21305 B-stock has a fall damage, which was professionally repaired in the MUSIC STORE guitar workshop. The guitar was carefully and thoroughly inspected for unrestricted function.",price:5041,discountPercentage:0,rating:5,stock:10,brand:"Ibanez",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/ibanez-j-custom-jcrg2104-i21305-b-stock_1_GIT0057623-000.jpg",images:["https://images.musicstore.de/images/1600/ibanez-j-custom-jcrg2104-i21305-b-stock_1_GIT0057623-000.jpg","https://images.musicstore.de/images/1600/ibanez-j-custom-jcrg2104-i21305-b-stock_4_GIT0057623-000.jpg","https://images.musicstore.de/images/1600/ibanez-j-custom-jcrg2104-i21305-b-stock_3_GIT0057623-000.jpg"]},{id:3,title:"Gibson Les Paul Standard '50s",description:"Left-handed electric guitar, nitro finish, set-neck mahogany body & neck, maple top, Burstbucker 1 & 2, ABR-1 Tune-orMatic, Case.",price:2015,discountPercentage:11,rating:4.7,stock:50,brand:"Gibson",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/gibson-les-paul-standard-50s-heritage-cherry-sunburst-lefthand_1_GIT0057851-000.jpg",images:["https://images.musicstore.de/images/1600/gibson-les-paul-standard-50s-heritage-cherry-sunburst-lefthand_1_GIT0057851-000.jpg","https://images.musicstore.de/images/1600/gibson-les-paul-standard-50s-heritage-cherry-sunburst-lefthand_4_GIT0057851-000.jpg","https://images.musicstore.de/images/1600/gibson-les-paul-standard-50s-heritage-cherry-sunburst-lefthand_3_GIT0057851-000.jpg"]},{id:4,title:"Gibson Slash Les Paul Standard",description:"Slash Signature left hand guitar, mahogany body, AAA-flamed maple top, Custom Alnico II Burstbucker, Tune-orMatic.",price:2053,discountPercentage:16,rating:4.8,stock:23,brand:"Gibson",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/gibson-slash-les-paul-standard-appetite-burst-lefthand_1_GIT0057868-000.jpg",images:["https://images.musicstore.de/images/1600/gibson-slash-les-paul-standard-appetite-burst-lefthand_1_GIT0057868-000.jpg","https://images.musicstore.de/images/1600/gibson-slash-les-paul-standard-appetite-burst-lefthand_4_GIT0057868-000.jpg","https://images.musicstore.de/images/1600/gibson-slash-les-paul-standard-appetite-burst-lefthand_3_GIT0057868-000.jpg"]},{id:5,title:"Fender Player Telecaster MN Tidepool",description:"The Player Series Telecaster is an instrument that is famous for its unique tone and feel, with classic style & modern additions.",price:646.2,discountPercentage:7.8,rating:4.6,stock:17,brand:"Fender",category:"Guitars",thumbnail:"https://images.musicstore.de/images/0960/fender-player-telecaster-mn-tidepool_1_GIT0046019-000.jpg",images:["https://images.musicstore.de/images/0960/fender-player-telecaster-mn-tidepool_1_GIT0046019-000.jpg","https://images.musicstore.de/images/1600/gibson-slash-les-paul-standard-appetite-burst-lefthand_4_GIT0057868-000.jpg"]},{id:6,title:"Fender '66 Strat Deluxe",description:"Custom Shop electric guitar, nitro finish, alder body, maple neck, rosewood fingerboard, '65 single coils, Vintage Modified.",price:3689,discountPercentage:2,rating:4.9,stock:43,brand:"Fender",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/fender-66-strat-deluxe-closet-classic-rw-faded-aged-candy-apple-red-cz564779_1_GIT0058505-000.jpg",images:["https://images.musicstore.de/images/1600/fender-66-strat-deluxe-closet-classic-rw-faded-aged-candy-apple-red-cz564779_1_GIT0058505-000.jpg","https://images.musicstore.de/images/1600/fender-66-strat-deluxe-closet-classic-rw-faded-aged-candy-apple-red-cz564779_4_GIT0058505-000.jpg","https://images.musicstore.de/images/1600/fender-66-strat-deluxe-closet-classic-rw-faded-aged-candy-apple-red-cz564779_3_GIT0058505-000.jpg"]},{id:7,title:"Fender Postmodern Strat Journeyman",description:"Custom Shop guitar, alder body, maple neck, 1959 D profile & compound radius, Dual-Mag II pickups, ½-blender wiring, case & COA.",price:3948,discountPercentage:7,rating:4.88,stock:8,brand:"Fender",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/fender-postmodern-strat-journeyman-relic-rw-aged-olympic-white-14786_1_GIT0058492-000.jpg",images:["https://images.musicstore.de/images/1600/fender-66-strat-deluxe-closet-classic-rw-faded-aged-candy-apple-red-cz564779_1_GIT0058505-000.jpg","https://images.musicstore.de/images/1600/fender-postmodern-strat-journeyman-relic-rw-aged-olympic-white-14786_4_GIT0058492-000.jpg","https://images.musicstore.de/images/0960/fender-postmodern-strat-journeyman-relic-rw-aged-olympic-white-14786_3_GIT0058492-000.jpg"]},{id:8,title:"Yamaha Storia II Natural",description:"With the Storia II Natural, Yamaha offers a compact and modern lifestyle western guitar that can convince at every occasion.",price:301,discountPercentage:1,rating:4.46,stock:16,brand:"Yamaha",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/yamaha-storia-ii-natural_1_GIT0050718-000.jpg",images:["https://images.musicstore.de/images/1600/yamaha-storia-ii-natural_1_GIT0050718-000.jpg","https://images.musicstore.de/images/1600/yamaha-storia-ii-natural_2_GIT0050718-000.jpg"]},{id:9,title:"Yamaha AC3M ARE VN",description:"The Yamaha AC3M ARE VN 6-String Electro-Acoustic Concert Guitar Vintage Natural is a concert sized guitar with an ARE solid sitka spruce top, solid mahogany back and sides, a mahogany neck and ebony fingerboard and bridge.",price:755,discountPercentage:18,rating:4.76,stock:35,brand:"Yamaha",category:"Guitars",thumbnail:"https://images.musicstore.de/images/0960/yamaha-ac3m-are-vn_1_GIT0041072-000.jpg",images:["https://images.musicstore.de/images/0960/yamaha-ac3m-are-vn_1_GIT0041072-000.jpg","https://images.musicstore.de/images/1600/yamaha-ac3m-are-vn_4_GIT0041072-000.jpg","https://images.musicstore.de/images/1600/yamaha-ac3m-are-vn_3_GIT0041072-000.jpg"]},{id:10,title:"Yamaha LS-TA TransAcoustic BS",description:"With the Yamaha LS-TA Western guitar series, Yamaha combines the proven sound of the Yamaha Original Jumbo Western design with the groundbreaking TransAcoustic technology.",price:973,discountPercentage:23,rating:4.66,stock:31,brand:"Yamaha",category:"Guitars",thumbnail:"https://images.musicstore.de/images/1600/yamaha-ls-ta-transacoustic-bs_1_GIT0038797-000.jpg",images:["https://images.musicstore.de/images/1600/yamaha-ls-ta-transacoustic-bs_1_GIT0038797-000.jpg","https://images.musicstore.de/images/1600/yamaha-ls-ta-transacoustic-bs_2_GIT0038797-000.jpg"]},{id:11,title:"Fame JBJ1049A-R Elias",description:"The Fame JBJ1049A Elias Junior 5-Piece Drum Kit (Red) is a complete Drum Kit designed for use by younger musicians. The “Elias” comes equipped with all the same components as a full-size Kit.",price:133,discountPercentage:3,rating:4.26,stock:44,brand:"Fame",category:"Drums",thumbnail:"https://images.musicstore.de/images/1600/fame-kiddyset-5-pc-junior-drumset-elias-red_2_DRU0032644-000.jpg",images:["https://images.musicstore.de/images/1600/fame-kiddyset-5-pc-junior-drumset-elias-red_2_DRU0032644-000.jpg","https://images.musicstore.de/images/1600/fame-kiddyset-5-pc-junior-drumset-elias-red_3_DRU0032644-000.jpg"]},{id:12,title:"Fame JBKB1605HW Maple Standard Jungle",description:"A beginner set with a variety of accessories, a great value for money and real professional sound!",price:301,discountPercentage:7,rating:4.16,stock:28,brand:"Fame",category:"Drums",thumbnail:"https://images.musicstore.de/images/1600/fame-jbkb1605hw-maple-standard-jungle-5-piece-drum-kit-ocean-blue-_1_DRU0021777-000.jpg",images:["https://images.musicstore.de/images/1600/fame-jbkb1605hw-maple-standard-jungle-5-piece-drum-kit-ocean-blue-_1_DRU0021777-000.jpg","https://images.musicstore.de/images/1600/fame-maple-standard-jungle-set-schlagzeug-tuerkis_3_DRU0021777-000.jpg"]},{id:13,title:"Tama IE72ZH8W-HBK Imperialstar",description:"The Tama IE72ZH8W-HBK Imperialstar Double Bass Kit Hairline Black is a high quality drum kit complete with cymbal set and hardware.",price:1120,discountPercentage:6,rating:4.86,stock:17,brand:"Tama",category:"Drums",thumbnail:"https://images.musicstore.de/images/1600/tama-ie72zh8w-hbk-imperialstar-double-bass-kit-hairline-black_1_DRU0040183-000.jpg",images:["https://images.musicstore.de/images/1600/tama-ie72zh8w-hbk-imperialstar-double-bass-kit-hairline-black_1_DRU0040183-000.jpg","https://images.musicstore.de/images/1600/tama-ie72zh8w-hbk-imperialstar-double-bass-kit-hairline-black_2_DRU0040183-000.jpg"]},{id:14,title:"Tama Starclassic Walnut Birch WBR52RZS-ROY",description:"The Tama Starclassic Walnut Birch WBR52RZS-ROY Red Oyster is a professional shell set with hybrid shells made of walnut/birch.",price:2226,discountPercentage:16,rating:4.96,stock:15,brand:"Tama",category:"Drums",thumbnail:"https://images.musicstore.de/images/1600/tama-starclassic-walnut-birch-wbr52rzs-roy-red-oyster_1_DRU0037963-000.jpg",images:["https://images.musicstore.de/images/1600/tama-starclassic-walnut-birch-wbr52rzs-roy-red-oyster_1_DRU0037963-000.jpg","https://images.musicstore.de/images/1600/tama-starclassic-walnut-birch-wbr52rzs-roy-red-oyster_2_DRU0037963-000.jpg"]},{id:15,title:"Casio CDP-S110 W",description:"Compact digital piano with 88 keys Scaled Hammer Action Keyboard II keyboard, 10 sounds, reverb and chorus effect.",price:326,discountPercentage:11,rating:4.56,stock:11,brand:"Casio",category:"Keys",thumbnail:"https://images.musicstore.de/images/1600/casio-cdp-s110-we_1_KEY0005564-000.jpg",images:["https://images.musicstore.de/images/1600/casio-cdp-s110-we_1_KEY0005564-000.jpg","https://images.musicstore.de/images/1600/casio-cdp-s110-we_2_KEY0005564-000.jpg","https://images.musicstore.de/images/1600/casio-cdp-s110-we_3_KEY0005564-000.jpg"]},{id:16,title:"Casio PX-S6000 BK",description:"Casio PX-S6000, stage piano, piano, 88 keys, hammer action, 256 voices, 350 sounds, string resonance, reverb, Bluetooth.",price:1493,discountPercentage:1,rating:4.83,stock:5,brand:"Casio",category:"Keys",thumbnail:"https://images.musicstore.de/images/1600/casio-px-s6000-bk_1_KEY0005673-000.jpg",images:["https://images.musicstore.de/images/1600/casio-px-s6000-bk_1_KEY0005673-000.jpg","https://images.musicstore.de/images/1600/casio-px-s6000-bk_3_KEY0005673-000.jpg","https://images.musicstore.de/images/1600/casio-px-s6000-bk_5_KEY0005673-000.jpg"]},{id:17,title:"Fame SP-5200 Digitalpiano",description:"The Fame SP-5200 is the ideal stage piano for beginners. This digital piano has an excellent keyboard which provides a natural playing feel.",price:335,discountPercentage:13,rating:4.13,stock:34,brand:"Fame",category:"Keys",thumbnail:"https://images.musicstore.de/images/0960/fame-sp-5200-digitalpiano_1_KEY0004596-000.jpg",images:["https://images.musicstore.de/images/0960/fame-sp-5200-digitalpiano_1_KEY0004596-000.jpg","https://images.musicstore.de/images/1600/fame-sp-5200-digitalpiano_2_KEY0004596-000.jpg","https://images.musicstore.de/images/1600/fame-sp-5200-digitalpiano_5_KEY0004596-000.jpg"]},{id:18,title:"Crown XLI 1500 2 x 450Watt",description:"The Crown XLi 1500 is a PA Power Amplifier, offering 450 Watts per Channel @ 4 Ohms.",price:327,discountPercentage:1,rating:4.8,stock:4,brand:"Crown",category:"AMP",thumbnail:"https://images.musicstore.de/images/1600/crown-xli-1500-2-x-450watt-4ohm_1_PAH0012917-000.jpg",images:["https://images.musicstore.de/images/1600/crown-xli-1500-2-x-450watt-4ohm_1_PAH0012917-000.jpg","https://images.musicstore.de/images/1600/crown-xli-1500-endstufe-2x-450-watt-4-ohm_2_PAH0012917-000.jpg","https://images.musicstore.de/images/1600/crown-xli-1500-endstufe-2x-450-watt-4-ohm_4_PAH0012917-000.jpg"]},{id:19,title:"Crown XLS 1002 DriveCore2",description:"The Crown XLS 1002 DriveCore 2 is the successor of the successful first Drive-Core generation. It performs 2x 350 watts into 4 ohms. Due to its neutral sound, excellent dynamics and enormous headroom, it is versatile.",price:335,discountPercentage:11,rating:4.7,stock:34,brand:"Crown",category:"AMP",thumbnail:"https://images.musicstore.de/images/1600/crown-xls-1002-drivecore2-serie-2x-350w-4ohm_1_PAH0017399-000.jpg",images:["https://images.musicstore.de/images/1600/crown-xls-1002-drivecore2-serie-2x-350w-4ohm_1_PAH0017399-000.jpg","https://images.musicstore.de/images/1600/crown-xls-1002-drivecore2-serie-2x-350w-4ohm_2_PAH0017399-000.jpg","https://images.musicstore.de/images/1600/crown-xls-1002-drivecore2-serie-2x-350w-4ohm_3_PAH0017399-000.jpg"]},{id:20,title:"Dynacord PowerMate 2200-3 Powermixer",description:"Third-generation success story: the PowerMate3! The current PowerMate generation features a multitude of innovations and optimizations. Despite a clear reduction in weight, it offers considerable gains in terms of both power amplifier output and features, as well as being more compact than ever before.",price:2722,discountPercentage:8,rating:4.9,stock:13,brand:"Dynacord",category:"AMP",thumbnail:"https://images.musicstore.de/images/1600/dynacord-powermate-2200-3-powermixer-2x-1000-w-4-ohm_1_PAH0010307-000.jpg",images:["https://images.musicstore.de/images/1600/dynacord-powermate-2200-3-powermixer-2x-1000-w-4-ohm_1_PAH0010307-000.jpg","https://images.musicstore.de/images/1600/dynacord-powermate-2200-3-powermixer-2x-1000-w-4-ohm_2_PAH0010307-000.jpg","https://images.musicstore.de/images/1600/dynacord-powermate-2200-3-powermixer-2x-1000-w-4-ohm_4_PAH0010307-000.jpg"]},{id:21,title:"Dynacord PowerMate 1000-3 Powermixer",description:"Third-generation success story: the PowerMate3! The current PowerMate generation features a multitude of innovations and optimizations.",price:2268,discountPercentage:23,rating:5,stock:11,brand:"Dynacord",category:"AMP",thumbnail:"https://images.musicstore.de/images/1600/dynacord-powermate-1000-3-powermixer-2x-1000-w-4-ohm_1_PAH0010305-000.jpg",images:["https://images.musicstore.de/images/1600/dynacord-powermate-1000-3-powermixer-2x-1000-w-4-ohm_1_PAH0010305-000.jpg","https://images.musicstore.de/images/1600/dynacord-powermate-1000-3_2_PAH0010305-000.jpg","https://images.musicstore.de/images/1600/dynacord-powermate-1000-3_5_PAH0010305-000.jpg"]}];class o{constructor(t,e,i,s){this.rangeInput=t,this.numInput=e,this.progress=i,this.priceGap=s,this.inputRangeLeft=t[0],this.inputRangeRight=t[1],this.priceInputLeft=e[0],this.priceInputRight=e[1],this.inputNumArr=[]}numbToRange(){this.rangeInput.forEach((e=>{e.addEventListener("input",(e=>{const i=parseInt(this.inputRangeLeft.value),s=parseInt(this.inputRangeRight.value);s-i<this.priceGap?"sub-range-category__range-lower"===t(e.target).className?this.inputRangeLeft.value=""+(s-this.priceGap):this.inputRangeRight.value=`${i+this.priceGap}`:(this.priceInputLeft.value=`${i}`,this.priceInputRight.value=`${s}`,this.progress.style.left=i/parseInt(this.inputRangeLeft.max)*100+"%",this.progress.style.right=100-s/parseInt(this.inputRangeRight.max)*100+"%")}))}))}rangeToNumb(){this.numInput.forEach((e=>{e.addEventListener("change",(e=>{const i=parseInt(this.priceInputLeft.value),s=parseInt(this.priceInputRight.value);s-i>=this.priceGap&&s<=5041&&("sub-range-category__input-number input-min"===t(e.target).className?(this.inputRangeLeft.value=`${i}`,this.progress.style.left=i/parseInt(this.inputRangeLeft.max)*100+"%"):(this.inputRangeRight.value=`${s}`,this.progress.style.right=100-s/parseInt(this.inputRangeRight.max)*100+"%"))}))}))}rangeAndNumb(){this.numbToRange(),this.rangeToNumb(),this.inputNumArr=[this.priceInputLeft.value,this.priceInputRight.value]}}class c{constructor(t){this.body=t,this.inputValueArr=["0","5041"],this.inputFunc=new o([this.body,this.body],[this.body,this.body],this.body,0)}createRangeAndInput(t,i,s,a,r){const n=e("div","sub-range-category",this.body);e("h2","sub-range-category__title",n,`${r}`).classList.add("subtitle");const c=e("div","sub-range-category__input-range",n,void 0),d=e("input","sub-range-category__range-lower",c,void 0,["min","0"],["max",`${t}`],["value",`${i}`],["type","range"]),h=e("input","sub-range-category__range-upper",c,void 0,["min","0"],["max",`${t}`],["value",`${s}`],["type","range"]),m=e("div","sub-range-category__slider-range",n),l=e("div","sub-range-category__slider-progress",m),g=e("div","sub-range-category__input-number-all",n),u=e("div","sub-range-category__input-container",g);e("p","sub-range-category__input-text",u,"From");const p=e("input","sub-range-category__input-number",u,void 0,["value",`${i}`],["type","number"]);p.classList.add("input-min");const _=e("div","sub-range-category__input-container",g);e("p","sub-range-category__input-text",_,"To");const b=e("input","sub-range-category__input-number",_,void 0,["value",`${s}`],["type","number"]),v=new o([d,h],[p,b],l,a);this.inputFunc=v,v.rangeAndNumb(),[d,p].forEach((t=>t.addEventListener("input",(()=>{this.inputValueArr[0]=v.priceInputLeft.value})))),[h,b].forEach((t=>t.addEventListener("input",(()=>{this.inputValueArr[1]=v.priceInputRight.value}))))}}class d{constructor(){if(this.container=document.createElement("div"),this.container.classList.add("main-page_filter-conteiner"),this.restAndCopy=new a(this.container),this.subCategory=new r(this.container,[...new Set(n.map((t=>t.category)))],"Category"),this.subBrand=new r(this.container,[...new Set(n.map((t=>t.brand)))],"Brand"),this.rangePrice=new c(this.container),this.rangeStock=new c(this.container),this.objectValue={category:this.subCategory._inputCategoryArr,brand:this.subBrand._inputCategoryArr,rangePrice:this.rangePrice.inputValueArr,rangeStock:this.rangeStock.inputValueArr},localStorage.getItem("mainObj")){const t=JSON.parse(localStorage.getItem("mainObj")),e=t.rangePrice;this.rangePrice.inputValueArr[0]=e[0],this.rangePrice.inputValueArr[1]=e[1];const i=t.rangeStock;this.rangeStock.inputValueArr[0]=i[0],this.rangeStock.inputValueArr[1]=i[1]}this.createAll()}createAll(){this.subCategory.createAll(),this.subBrand.createAll(),this.rangePrice.createRangeAndInput(5041,0,5041,150,"Price range"),this.rangeStock.createRangeAndInput(50,0,50,3,"Stock")}}class h{constructor(){this.container=document.createElement("aside"),this.container.classList.add("main-page__filter"),this.search=new s,this.filters=new d,this.mainObj=this.filters.objectValue,this.mainObj.search=this.search.searchValue,this.container.addEventListener("input",(e=>{"INPUT"===t(e.target).tagName&&(this.mainObj.search=this.search.searchValue)})),this.container.append(this.search.container,this.filters.container)}}class m{constructor(){this.container=document.createElement("div"),this.container.classList.add("main-page__header");const i=e("div","main-page__allSort",this.container),s=e("div","main-page__configuratin",i);this.smallConfiguration=e("img","main-page__small-configuration",s,void 0,["src","./assets/img/manyConfig.svg"],["alt","small configuration"],["configuration","small"]),this.bigConfiguration=e("img","main-page__big-configuration",s,void 0,["src","./assets/img/smallConfig.svg"],["alt","big configuration"],["configuration","big"]),this.burger=e("img","main-page__burger",i,void 0,["src","./assets/img/burger.svg"],["alt","burger"]);const a=e("div","main-page__sort",i);e("div","main-page__sort-tittle",a,"Sort:"),this.sortButton=e("div","main-page__sort-selector",a),this.sortButtonContainer=e("div","main-page__button-container",this.sortButton),this.sortButton.addEventListener("click",this.openSortF),this.sortButtonText=e("p","main-page__sort-paragraph",this.sortButtonContainer,"no-Sort"),this.sortArray=e("img","main-page__sort-img",this.sortButtonContainer,"Sort:",["src","./assets/img/array.png"],["alt","array"]),this.sortDirection=e("img","main-page__sort-direction",a,"Sort:",["src","./assets/img/direction.png"],["alt","direction"]),this.noSort=e("p","main-page__sort-item",this.sortButton,"no-Sort"),this.sortPrice=e("p","main-page__sort-item",this.sortButton,"price"),this.sortRating=e("p","main-page__sort-item",this.sortButton,"rating"),this.sortButtonArr=[this.noSort,this.sortPrice,this.sortRating],this.sortButtonArr.forEach((e=>{e.addEventListener("click",(e=>{const i=t(e.target).textContent;this.sortButtonText.textContent=i}))}));const r=e("p","main-page__results",this.container," search results");this.resultNum=document.createElement("span"),this.resultNum.textContent="23",r.prepend(this.resultNum)}openSortF(e){"visible"===t(e.currentTarget).style.overflow?t(e.currentTarget).style.overflow="hidden":t(e.currentTarget).style.overflow="visible"}}class l{constructor(t){this.cards=new Map,this.container=document.createElement("div"),this.container.classList.add("gallery"),this.products=t,this.cardsLinkArray=[],this.createGallery()}createGallery(){this.cards=new Map;for(let t=0;t<this.products.length;t++){const e=new g(this.products[t]),i=this.products[t].id;this.cards.set(i,e),this.cardsLinkArray.push(e),this.container.append(e.container)}}changeGallery(t){this.container.innerHTML="";for(let e=0;e<t.length;e++){const i=this.cardsLinkArray[t[e].id-1];this.container.append(i.container)}}}class g{constructor(t){this._added=!1,this.data=t,this.container=document.createElement("div"),this.container.classList.add("gallery__item"),this.container.dataset.id=this.data.id.toString();const i=e("div","gallery__img",this.container);e("img","gallery__img-img",i,void 0,["src",`${this.data.thumbnail}`],["alt",`${this.data.category}`]);const s=e("div","gallery__container",this.container);e("p","gallery__title",s,`${this.data.title}`),e("p","gallery__dicription",s,`${this.data.description}`);const a=e("div","gallery__button-price",s);this.button=e("div","gallery__button",a,"Add to cart"),this.button.classList.add("button"),e("p","gallery__price",a,`$${this.data.price}`)}}class u{constructor(t){this.products=t,this.header=new m,this.galleryItems=new l(this.products),this.galleryItemsCntainer=this.galleryItems.container,this.container=document.createElement("div"),this.container.classList.add("main-page__all-products"),this.container.append(this.header.container,this.galleryItemsCntainer)}}class p{constructor(){this.filters=new h,this.mainObj=this.filters.mainObj,this.gallery=new u(n),this.container=document.createElement("main"),this.container.classList.add("main"),this.mainPage=document.createElement("section"),this.mainPage.classList.add("main-page"),this.container.append(this.filters.container),this.container.append(this.mainPage),this.mainPage.append(this.gallery.container)}}class _{constructor(t,e,i,s){this.productFilter,this.mainObj=t,this.mainPage=e,this.funcCreate,this.productFilter,this.gallery=i,this.product=n,this.filters=s}resetFunction(){console.log(this.mainObj),this.mainObj.brand.splice(0),this.mainObj.category.splice(0);const t=this.filters.filters.subCategory.inputsArr,e=this.filters.filters.subBrand.inputsArr,i=t.concat(e);for(let t=0;t<i.length;t++)i[t].checked=!1;this.mainObj.rangePrice[0]="0",this.mainObj.rangePrice[1]="5041",this.mainObj.rangeStock[1]="0",this.mainObj.rangeStock[1]="50",this.filters.search.container.value="";const s=this.gallery.header.sortButtonArr[0];this.gallery.header.sortButtonText.textContent="no-Sort",this.sortWithoutRender(s);const a=this.gallery.header.sortDirection;localStorage.removeItem("sort"),a.classList.remove("mirror"),localStorage.removeItem("bigItems"),this.gallery.galleryItemsCntainer.style.gridTemplateColumns="1fr 1fr 1fr",this.funcCreate()}funcSort(t){this.sortWithoutRender(t),this.funcCreate()}sortWithoutRender(t){"no-Sort"===t.textContent?(localStorage.setItem("sortButton","no-Sort"),this.product.sort(((t,e)=>t.id-e.id))):"price"===t.textContent?(localStorage.setItem("sortButton","price"),this.product.sort(((t,e)=>t.price-e.price))):"rating"===t.textContent&&(localStorage.setItem("sortButton","rating"),this.product.sort(((t,e)=>t.rating-e.rating)))}funcSortDirection(t){this.sortDirectionsortWithoutRender(t),this.funcCreate()}sortDirectionsortWithoutRender(t){localStorage.setItem("sort","on"),"main-page__sort-direction"!==t.className&&localStorage.removeItem("sort"),t.classList.toggle("mirror"),this.product.reverse()}changeGrid(t,e){const i=t.getAttribute("configuration");t.style.filter="invert(42%) sepia(77%) saturate(1822%) hue-rotate(352deg) brightness(102%) contrast(108%)",e.style.filter="none","small"===i?(this.gallery.galleryItemsCntainer.style.gridTemplateColumns="1fr 1fr 1fr",localStorage.removeItem("bigItems")):"big"===i&&(this.gallery.galleryItemsCntainer.style.gridTemplateColumns="1fr 1fr",localStorage.setItem("bigItems","on"))}funcCreate(){localStorage.getItem("bigItems")&&(this.gallery.galleryItemsCntainer.style.gridTemplateColumns="1fr 1fr"),localStorage.setItem("mainObj",JSON.stringify(this.mainObj));const t=this.productFilter(this.product);this.gallery.galleryItems.changeGallery(t),0===t.length?(console.log(this.gallery.galleryItemsCntainer),this.gallery.galleryItemsCntainer.textContent="No results",this.gallery.galleryItemsCntainer.classList.add("big-text")):this.gallery.galleryItemsCntainer.classList.remove("big-text"),console.log(this.gallery.galleryItemsCntainer),this.gallery.header.resultNum.textContent=`${t.length}`}productFilter(e){let i=JSON.parse(JSON.stringify(e));this.mainObj.brand.length>0&&(i=i.filter((t=>t.brand===this.mainObj.brand[this.mainObj.brand.indexOf(t.brand)]))),this.mainObj.category.length>0&&(i=i.filter((t=>t.category===this.mainObj.category[this.mainObj.category.indexOf(t.category)]))),i=i.filter((t=>t.price>=parseInt(this.mainObj.rangePrice[0])&&t.price<=parseInt(this.mainObj.rangePrice[1]))),i=i.filter((t=>t.stock>=parseInt(this.mainObj.rangeStock[0])&&t.stock<=parseInt(this.mainObj.rangeStock[1])));const s=`${this.mainObj.search}`;this.mainObj.search.length>0&&(i=i.filter((t=>t.description.toLowerCase().includes(s.toLowerCase())||t.title.toLowerCase().includes(s.toLowerCase())||t.brand.toLowerCase().includes(s.toLowerCase())||t.category.toLowerCase().includes(s.toLowerCase())||String(t.rating).toLowerCase().includes(s.toLowerCase())||String(t.stock).toLowerCase().includes(s.toLowerCase()))));const a=[],r=[];for(let t=0;t<i.length;t++)a.push(i[t].price),r.push(i[t].stock);const n=this.filters.filters.rangePrice.inputFunc,o=n.inputRangeLeft,c=n.inputRangeRight,d=n.priceInputLeft,h=n.priceInputRight,m=n.progress,l=this.filters.filters.rangeStock.inputFunc,g=l.inputRangeLeft,u=l.inputRangeRight,p=l.priceInputLeft,_=l.priceInputRight,b=l.progress;let v=Math.min(...a),y=Math.max(...a);i.length>20&&(v=0,y=5041);let f=Math.min(...r),w=Math.max(...r);function I(e,s){e.forEach((e=>{const a=[];i.forEach((t=>{"category"===s&&t.category===e.id&&a.push(t),"brand"===s&&t.brand===e.id&&a.push(t)}));const r=t(e.nextSibling);0===a.length?(e.style.opacity="0.4",r.style.opacity="0.4"):(e.style.opacity="1",r.style.opacity="1")}))}i.length>20&&(f=0,w=50);const C=this.filters.filters.subCategory.inputsArr,k=this.filters.filters.subBrand.inputsArr;return I(C,"category"),I(k,"brand"),v!==1/0&&v!==1/0&&(this.inputRangetoNumb(v,y,o,c,d,h,m,150),this.inputRangetoNumb(f,w,g,u,p,_,b,3)),i}inputRangetoNumb(t,e,i,s,a,r,n,o){i.value=`${t}`,s.value=`${e}`,a.value=`${t}`,r.value=`${e}`,n.style.left=t/parseInt(i.max)*100+"%",n.style.right=100-(e-o/4)/parseInt(s.max)*100+"%"}}class b{constructor(){this.app=new p,this.model=new _(this.app.mainObj,this.app.mainPage,this.app.gallery,this.app.filters),this.app.container.addEventListener("input",this.model.funcCreate.bind(this.model)),this.app.container.addEventListener("input",(()=>{this.app.gallery=this.model.gallery}));const t=this.app.gallery.header.sortButtonArr;if(t.forEach((t=>{t.addEventListener("click",this.model.funcSort.bind(this.model,t))})),localStorage.getItem("sortButton")){const e=t.find((t=>t.textContent===localStorage.getItem("sortButton")));this.model.sortWithoutRender(e),this.app.gallery.header.sortButtonText.textContent=localStorage.getItem("sortButton")}const e=this.app.gallery.header.sortDirection;e.addEventListener("click",this.model.funcSortDirection.bind(this.model,e)),localStorage.getItem("sort")&&this.model.funcSortDirection(e),this.app.filters.filters.restAndCopy.resetButton.addEventListener("click",this.model.resetFunction.bind(this.model));const i=this.app.gallery.header.smallConfiguration,s=this.app.gallery.header.bigConfiguration;i.addEventListener("click",this.model.changeGrid.bind(this.model,i,s)),s.addEventListener("click",this.model.changeGrid.bind(this.model,s,i)),this.model.funcCreate()}}class v{constructor(){this.container=document.createElement("footer"),this.container.classList.add("footer");const t=e("div","container",this.container),i=e("nav","footer__nav",t),s=e("a","footer__git-hub",i,void 0,["href","https://rs.school/js/"]);e("img","footer__git-hub-img",s,void 0,["src","./assets/img/github.svg"],["alt","GitHub"]),e("p","footer__year",i,"created 2023");const a=e("a","footer__rs-shool",i,void 0,["href","https://github.com/PavelArabei?tab=repositories"]);e("img","footer__rs-shool-img",a,void 0,["src","./assets/img/rs-school.svg"],["alt","RSShool"])}}class y{constructor(){this.container=document.createElement("div"),this.container.classList.add("error");const t=e("div","error__flex-container",this.container);e("img","error__img",t,void 0,["src","./assets/img/errorPageImg.png"]);const i=e("div","error__flex-discription",t);e("h2","error__404",i,"404"),e("p","error__text",i,"Page not found"),this.button=e("a","error__link",i,void 0,["href","#"]),this.button.classList.add("gallery__button"),e("p","error__link-text",this.button,"Main page")}}class f{constructor(){this.errorPage=new y,this.searchPageController=new b,this.searchPage=this.searchPageController.app,this.container=document.createElement("div"),this.container.classList.add("container"),this.documentBody=document.body,console.log(this.container),this.header=new i,this.documentBody.append(this.header.container,this.container),this.footer=new v,this.documentBody.append(this.footer.container),this.openBurgerMenu()}set containerContent(t){this.container.replaceChildren(t)}openBurgerMenu(){const t=this.searchPage.gallery.header.burger,i=document.body,s=this.searchPage.filters.container;t.addEventListener("click",(()=>{s.style.left="20px";const t=e("div","background",i);t.addEventListener("click",(()=>{i.removeChild(t),s.style.left="-400px"}))}))}}class w{constructor(){this.cartItems=new Map,this._priceSum=0,this._itemsAmountSum=0,this._couponList=new Map,this._couponList.set("epm",10),this._couponList.set("rs",10)}get couponList(){return this._couponList}get priceSum(){console.log(this.cartItems);let t=0;for(const e of this.cartItems){const i=n.find((t=>t.id===e[0]));void 0!==i&&(t+=i.price*e[1])}return t}get itemsAmount(){return[...this.cartItems.values()].reduce(((t,e)=>t+e),0)}getCartItemsData(){const t=[];for(const e of this.cartItems){const i=n.find((t=>t.id===e[0]));void 0!==i&&t.push([i,e[1]])}return t}}class I{constructor(){this.container=document.createElement("div"),this.container.classList.add("cart");const t=e("div","cart-content",this.container),i=e("div","cart__order-summary",this.container),s=e("div","cart__header",t),a=(e("h2","cart__heading",s,"Producst in cart"),e("div","cart__pagination-control",s));e("span","pagination-control__page-span",a,"Page: "),this.paginationControlPageCountDown=e("img","pagination-control__arrow-left",a,void 0,["src","./assets/img/icons/arrow-left.svg"]),this.paginationPageNumber=e("span","pagination-control__page-number",a,"1/1"),this.paginationControlPageCountUp=e("img","pagination-control__arrow-right",a,void 0,["src","./assets/img/icons/arrow-right.svg"]);const r=e("form","pagination-control__form",a,"",["onSubmit","return false"]);e("label","pg-limit",r,"Items per page: "),this.itemsLimitInput=e("input","pages-limit",r),this.itemsList=e("ul","cart-items-list",t),e("h3","order-summary__heading",i,"In cart"),this.itemsCount=e("p","order-summary__items-amount",i,"0 items");const n=e("form","promo-code-form",i),o=(e("label","promo-label",n,"Promo code",["id","promo-label"]),e("div","input-promo-wrap",n));this.promoInput=e("input","promo-input",o,void 0,["type","text"],["id","promo-input"],["name","promo-code"],["placeholder","Test promo: RS, EPM"]),this.promoEnterIcon=e("img","promo-input-arrow",o,void 0,["src","./assets/img/icons/enter-promo.svg"]),this.promoEnterIcon.classList.add("hidden-element"),this.codesWrap=e("div","order-summary__applied-codes-wrap",i),this.codesWrap.classList.add("hidden-element"),e("span","applied-codes_span",this.codesWrap,"Applied codes: "),this.appliedCodesList=e("ul","applied-codes__list",this.codesWrap),e("li","applied-codes__item",this.appliedCodesList,"EPM: -20%");const c=e("div","order-summary__price-wrap",i);this.noDiscountPrice=e("span","order-summary__price",c,"$0"),this.discountPrice=e("span","order-summary__discount-price",c,"$0"),this.discountPrice.classList.add("hidden-element"),this.orderButton=e("button","order-summary__order-button",i,"Order now")}}class C{constructor(t,i){this.data=t,this.amount=i,this.container=document.createElement("li"),this.container.classList.add("cart-items-list__item"),e("img","cart-item__image",this.container,"",["src",`${t.images[0]}`]);const s=e("div","cart-item__main",this.container),a=(e("h3","cart-item__heading",s,`${t.title}`),e("p","cart-item__description",s,`${t.description}`),e("div","cart-item__bottom-container",s)),r=e("div","cart-item__stats-wrapper",a),n=(e("p","cart-item__stats-stock",r,`Stock: ${t.stock}`),e("p",'class="cart-item__stats-brand"',r,`Brand: ${t.brand}`),e("p","cart-item__stats-rating",r,`Rating: ${t.rating}`),e("div","cart-item__item-amount",a));e("span","cart-item__amount-span",n,"In cart: "),this.decreaseAmountButton=e("img","cart-item__arrow-left",n,"",["src","./assets/img/icons/arrow-left.svg"]),this.itemAmountNumber=e("span","cart-item__amount-number",n,`${this.amount}`),this.increaseAmountButton=e("img","cart-item__arrow-right",n,"",["src","./assets/img/icons/arrow-right.svg"]),this.price=e("p","cart-item__price",a,"$"+this.amount*Number(t.price))}}class k{constructor(t){this.model=new w,this.view=new I,this.cartItems=this.model.cartItems,this.cartItemCards=this.updateItemCards(),this.currentPage=1,this.couponList=this.model.couponList,this.appliedCoupons=new Set,this.header=t,this.cartItemCards.forEach((t=>{this.view.itemsList.append(t.container),t.container.dataset.itemId=t.data.id.toString()})),this.itemsPerPage=this.cartItemCards.length,this.addInputEvent(),this.paginationButtonEvents(),this.view.promoInput.addEventListener("input",this.couponInputEvent.bind(this)),this.view.promoInput.addEventListener("submit",(t=>t.preventDefault()))}addInputEvent(){this.view.itemsLimitInput.addEventListener("submit",(t=>{t.preventDefault()})),this.view.itemsLimitInput.addEventListener("input",(t=>{t.target instanceof HTMLInputElement&&(this.currentPage=1,this.itemsPerPage=Number(t.target.value),Number.isInteger(this.itemsPerPage)&&Number(this.itemsPerPage)>0?(this.view.paginationPageNumber.innerText=`${this.currentPage}/${Math.ceil(this.cartItems.size/this.itemsPerPage)}`,this.fillCartCards(...this.getPaginationNumbers())):(this.currentPage=1,this.view.paginationPageNumber.innerText="1/1",this.fillCartCards()))}))}addItem(t,e){0===e&&this.cartItems.has(t)?this.cartItems.delete(t):this.cartItems.set(t,e)}get priceSum(){return Math.round(this.model.priceSum)}get itemsAmount(){return this.model.itemsAmount}updateItemCards(){const t=this.model.getCartItemsData(),e=[];return t.forEach((t=>{const i=new C(...t);e.push(i),i.container.dataset.id=t[0].id.toString()})),this.cartItemCards=e,e}addItemCardEvents(){this.cartItemCards.forEach((t=>{t.decreaseAmountButton.addEventListener("click",(()=>{const e=this.cartItems.get(t.data.id);console.log(e),void 0!==e&&(1===e?this.cartItems.delete(t.data.id):this.cartItems.set(t.data.id,e-1)),this.updateSummary(),this.renderCartItems()})),t.increaseAmountButton.addEventListener("click",(()=>{const e=this.cartItems.get(t.data.id);if(console.log(e),void 0!==e){if(e===t.data.stock)return;this.cartItems.set(t.data.id,e+1),t.itemAmountNumber.textContent=(t.data.id,e+1).toString()}this.updateSummary()}))}))}getPaginationNumbers(){const t=this.itemsPerPage*(this.currentPage-1);return[t,t+this.itemsPerPage]}fillCartCards(t,e){const i=void 0===t&&void 0===e?this.cartItemCards:this.cartItemCards.slice(t,e);this.view.itemsList.replaceChildren(),i.forEach((t=>this.view.itemsList.append(t.container)))}paginationButtonEvents(){this.view.paginationControlPageCountDown.addEventListener("click",(t=>{0!==this.itemsPerPage?t.target instanceof HTMLElement&&this.currentPage>1&&(this.currentPage-=1,this.fillCartCards(...this.getPaginationNumbers()),this.view.paginationPageNumber.innerText=`${this.currentPage}/${Math.ceil(this.cartItems.size/this.itemsPerPage)}`):this.view.paginationPageNumber.innerText="1/1"})),this.view.paginationControlPageCountUp.addEventListener("click",(t=>{0!==this.itemsPerPage?t.target instanceof HTMLElement&&this.currentPage<Math.ceil(this.cartItems.size/this.itemsPerPage)&&(this.currentPage+=1,this.fillCartCards(...this.getPaginationNumbers()),this.view.paginationPageNumber.innerText=`${this.currentPage}/${Math.ceil(this.cartItems.size/this.itemsPerPage)}`):this.view.paginationPageNumber.innerText="1/1"}))}couponInputEvent(t){t.preventDefault(),t.target instanceof HTMLInputElement&&(void 0!==this.model.couponList.get(t.target.value.toLocaleLowerCase())?this.view.promoEnterIcon.classList.remove("hidden-element"):this.view.promoEnterIcon.classList.add("hidden-element"))}updateSummaryPrice(){this.view.noDiscountPrice.textContent=Math.round(this.model.priceSum).toString()}totalItemsAmount(){return[...this.model.cartItems.values()].reduce(((t,e)=>t+e),0)}updateSummary(){this.header.totalAmount=Math.round(this.model.priceSum),this.header.basketScoreAmount=this.model.itemsAmount,this.view.itemsCount.innerText=`${this.model.itemsAmount} item${1!==this.model.itemsAmount?"s":""}`,this.view.noDiscountPrice.innerText=`Total: $${Math.round(this.model.priceSum).toString()}`}resetPagination(){this.itemsPerPage=0,this.currentPage=1,this.view.paginationPageNumber.textContent="1/1",this.view.itemsLimitInput instanceof HTMLInputElement&&(this.view.itemsLimitInput.value="")}renderCartItems(){this.updateItemCards(),this.fillCartCards(),this.addItemCardEvents()}}class P{constructor(t){this.item=t,this.container=document.createElement("div"),this.container.classList.add("item-page"),this.itemImages=e("div","item-page__item-images",this.container),this.mainImageContainer=e("div","item-page__main-image-container",this.itemImages),this.mainImage=e("img","item-page__main-image",this.mainImageContainer,void 0,["src",`${this.item.images[0]}`]),this.imagesPreviewContainer=e("div","item-page__images-preview-container",this.itemImages),this.thumbnails=this.item.images.map(((t,i)=>{const s=e("div","item-page__item-page-container",this.imagesPreviewContainer);return e("img","item-page__thumbnail",s,void 0,["src",`${this.item.images[i]}`])})),this.rightBlock=e("div","item-page__right-block",this.container),this.heading=e("h2","item-page__heading",this.rightBlock,this.item.title),this.price=e("span","item-page__price",this.rightBlock,`$${this.item.price}`),this.itemDescription=e("span","item-page__description",this.rightBlock,`${this.item.description}`),this.purchaceButtonsContainer=e("p","item-page__purchase-buttons-container",this.rightBlock),this.addButton=e("a","item-page__add-button",this.purchaceButtonsContainer,"Add to cart"),this.buyNow=e("a","item-page__buy-now-button",this.purchaceButtonsContainer,"Buy now"),this.ratingStarsContainer=e("div","item-page__rating-stars-container",this.rightBlock),this.itemInfo=e("div","item-page__item-info",this.rightBlock),this.stock=e("p","item-page__stock",this.itemInfo,"Stock: "),this.brand=e("p","item-page__brand",this.itemInfo,"Brand: "),this.rating=e("p","item-page__rating",this.itemInfo,"Rating: "),this.stockData=e("span","item-page__stock-data",this.stock,`${this.item.stock}`),this.brandData=e("span","item-page__brand-data",this.brand,`${this.item.brand}`),this.ratingData=e("span","item-page__rating-data",this.rating,`${this.item.rating}`),this.fillRatingStars()}fillRatingStars(){this.ratingStarsContainer.replaceChildren();for(let t=0;t<5;t++)Math.round(this.item.rating)>t?e("img","item-page__star",this.ratingStarsContainer,void 0,["src","./assets/img/icons/star-full.svg"]):e("img","item-page__star",this.ratingStarsContainer,void 0,["src","./assets/img/icons/star-empty.svg"])}}function L(t,i){const s=e("div","modal__group-container",t);e("h2","modal__title",s,i);const a=e("div","modal__input-container",s);return function(t,i,s,r){const n=e("div","modal__input-text-container",a);e("p","modal__input-title",n,`${t}`);const o=e("input","modal__input",n,void 0,["type",`${i}`]);return o.classList.add(`modal__input-${s}`),e("p","modal__input-error",n),r&&(e("img","modal__input-img",n,void 0,["src","./assets/img/logos_mastercard.svg"]).style.zIndex="-1"),o}}class A{constructor(){this.flag=!1,this.container=document.createElement("div"),this.container.classList.add("modal"),this.modalWindow=e("div","modal__window",this.container),this.closeButton=e("img","modal__close-button",this.modalWindow,void 0,["src","./assets/img/closeButton.png"],["alt","closeButton"]);const t=e("div","modal__container",this.modalWindow),i=L(t,"Order details");this.inputName=i("Full name","text","name"),this.inputName.addEventListener("keydown",(t=>"Tab"===t.key&&this.isValidName.call(this))),this.inputTel=i("Phone number","tel","tel"),this.inputTel.addEventListener("keydown",(t=>"Tab"===t.key&&this.isValidNumber.call(this))),this.inputEmail=i("Email","email","email"),this.inputEmail.addEventListener("keydown",(t=>"Tab"===t.key&&this.isValidEmail.call(this)));const s=L(t,"Delivery address");this.inputAddress=s("Delivery Addres","text","address"),this.inputAddress.addEventListener("keydown",(t=>"Tab"===t.key&&this.isValidAdress.call(this)));const a=L(t,"Payment details");this.inputCard=a("Card number","text","card","img"),this.inputCard.setAttribute("data-pattern","0000 0000 0000 0000"),this.inputValid=a("Valid","text","valid"),this.inputValid.setAttribute("data-pattern","00/00"),this.inputCVV=a("CVV","text","cvv"),this.inputCVV.setAttribute("data-pattern","000"),this.mask([this.inputCard,this.inputValid,this.inputCVV]);const r=e("a","modal__button",t,void 0,["href","#"]);r.addEventListener("click",this.isValidAll.bind(this)),e("p","modal__button-text",r,"Confirm order")}isValidAll(t){t.preventDefault();const e=this.isValidName(),i=this.isValidNumber(),s=this.isValidEmail(),a=this.isValidAdress(),r=this.isValidCard(),n=this.isValidMounth(),o=this.isCVV();console.log(e,i,s,a,r,n,o),this.flag=!!(e&&i&&s&&a&&r&&n&&o)}isValidName(){const t=/^[а-яА-ЯёЁa-zA-Z]{3,} [а-яА-ЯёЁa-zA-Z]{3,}$/.test(this.inputName.value);return this.isValid(this.inputName,t)}isValidNumber(){const t=/^\+\d{9,}$/.test(this.inputTel.value);return this.isValid(this.inputTel,t)}isValidEmail(){const t=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu.test(this.inputEmail.value);return this.isValid(this.inputEmail,t)}isValidAdress(){const t=/^[а-яА-ЯёЁa-zA-Z0-9]{5,}\s[а-яА-ЯёЁa-zA-Z0-9]{5,}\s[а-яА-ЯёЁa-zA-Z0-9]{5,}$/.test(this.inputAddress.value);return this.isValid(this.inputAddress,t)}isValidCard(){const t=/^\d{4,4}\s\d{4,4}\s\d{4,4}\s\d{4,4}$/.test(this.inputCard.value);return this.isValid(this.inputCard,t)}isValidMounth(){const t=/^([0]?[1-9]|1[0-2])\/([0-2]?[\d]|3[0-1])$/.test(this.inputValid.value);return this.isValid(this.inputValid,t)}isCVV(){const t=/^\d{3,3}$/.test(this.inputCVV.value);return this.isValid(this.inputCVV,t)}isValid(e,i){const s=t(e.previousSibling),a=t(e.nextSibling);return i?(a.textContent="",s.classList.remove("invalid"),s.classList.add("valid"),e.classList.remove("invalidInput"),e.classList.add("validInput")):(a.textContent=`* invalid ${s.textContent} *`,s.classList.remove("valid"),s.classList.add("invalid"),e.classList.remove("validInput"),e.classList.add("invalidInput")),i}mask(t){const e=["(",")","-"," ",":","/"];t.forEach((t=>{const i=t.dataset.pattern.split("");function s(a){e.includes(i[t.value.length])&&(t.value+=i[t.value.length],e.includes(i[t.value.length])&&s(i[t.value.length]));let r=/\d/;"0"!=i[t.value.length]&&"#"!=i[t.value.length]||("0"===i[t.value.length]&&(r=/\d/),"#"===i[t.value.length]&&(r=/[a-zA-Z]/),r.test(a)&&(t.value+=a))}function a(){e.includes(i[t.value.length-1])&&(t.value=t.value.slice(0,-1),e.includes(i[t.value.length-1])&&a())}t.addEventListener("keypress",(t=>{t.preventDefault(),s(t.key)})),t.addEventListener("paste",(s=>{s.preventDefault();const a=s.clipboardData.getData("text").replace(/\s/g,"").split("");a.forEach(((t,e)=>{let s=/\d/;"0"!=i[e]&&"#"!=i[e]||("0"===i[e]&&(s=/\d/),"#"===i[e]&&(s=/[a-zA-Z]/),s.test(t)||(a.splice(e,1),s.test(t)||a.splice(e,1)))})),i.forEach(((t,i)=>{e.includes(t)&&a.splice(i,0,t)})),t.value=a.join("").substring(0,i.length)})),t.addEventListener("keyup",(e=>{var i;if("0000 0000 0000 0000"===t.dataset.pattern){const e=t.value[0],s=null===(i=t.nextSibling)||void 0===i?void 0:i.nextSibling;s.style.zIndex="-1","3"!==e&&"4"!==e&&"5"!==e||(s.style.zIndex="0","3"===e&&s.setAttribute("src","./assets/img/logos_unionpay.svg"),"4"===e&&s.setAttribute("src","./assets/img/logos_visa.svg"),"5"===e&&s.setAttribute("src","./assets/img/logos_mastercard.svg"))}"Tab"===e.key&&("00/00"===t.dataset.pattern&&this.isValidCard(),"000"===t.dataset.pattern&&this.isValidMounth()),"Backspace"===e.key&&a()}))}))}}class E{constructor(t,e){this.data=e.data,this.cart=t,this.view=new P(e.data),this.card=e,this.view.addButton.addEventListener("click",this.addToCartEvent.bind(this)),this.view.buyNow.addEventListener("click",this.buyNowButtonEvent.bind(this)),this.view.mainImage.addEventListener("click",this.enlargeImageEvent.bind(this)),this.view.thumbnails.forEach((t=>{t.addEventListener("click",(()=>{const e=t.getAttribute("src");null!==e&&this.view.mainImage.setAttribute("src",e)}))}))}addToCartEvent(){this.cart.cartItems.has(this.data.id)?(this.cart.cartItems.delete(this.data.id),this.view.addButton.innerText="Add to cart",this.view.addButton.style.backgroundColor=""):(this.cart.addItem(this.data.id,1),this.view.addButton.innerText="Remove",this.view.addButton.style.backgroundColor="#730600"),this.updateCardButton()}updateCardButton(){this.cart.cartItems.has(this.data.id)?(this.card.button.style.backgroundColor="#730600",this.card.button.innerText="Remove"):(this.card.button.style.backgroundColor="",this.card.button.innerText="Add to cart")}buyNowButtonEvent(){const t=new A;document.body.append(t.container),t.container.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&0===e.button&&(t.container.remove(),e.stopImmediatePropagation())})),t.closeButton.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&0===e.button&&(t.container.remove(),e.stopImmediatePropagation())}))}enlargeImageEvent(){const t=this.view.mainImage.getAttribute("src"),e=new S(t||"");document.body.append(e.container),e.container.addEventListener("mousedown",(t=>{t.target===t.currentTarget&&0===t.button&&(e.container.remove(),t.stopImmediatePropagation())})),e.cross.addEventListener("mousedown",(t=>{t.target===t.currentTarget&&0===t.button&&(e.container.remove(),t.stopImmediatePropagation())}))}}class S{constructor(t){this.container=document.createElement("div"),this.container.classList.add("modal"),this.image=document.createElement("img"),this.image.classList.add("image-popup__image"),this.image.setAttribute("src",t),this.cross=document.createElement("img"),this.cross.classList.add("image-popup__cross"),this.cross.setAttribute("src","./assets/img/closeButton.png");const e=document.createElement("div");e.classList.add("image-popup__white-bg"),this.container.append(e),e.prepend(this.cross),e.append(this.image)}}new class{constructor(){this.appView=new f,this.cart=new k(this.appView.header),this.contentClass=this.appView.searchPage,this.generateSearchPageContent(),this.appView.header.logoLink.addEventListener("click",this.goToMainPage.bind(this)),this.appView.header.basket.addEventListener("click",(()=>{this.contentClass=this.cart.view,this.appView.containerContent=this.cart.view.container,this.cart.resetPagination(),this.cart.renderCartItems(),this.cart.updateSummary()})),this.openItemPageFromCartEvent()}openErrorPage(){this.appView.containerContent=this.appView.errorPage.container}addCardEvents(){this.appView.searchPage.gallery.galleryItems.cards.forEach((t=>{t.container.addEventListener("click",(()=>{this.contentClass=new E(this.cart,t),this.contentClass.cart=this.cart,this.appView.containerContent=this.contentClass.view.container,this.cart.cartItems.has(t.data.id)&&(this.contentClass.view.addButton.innerText="Remove",this.contentClass.view.addButton.style.backgroundColor="#730600"),this.contentClass.view.addButton.addEventListener("click",this.refreshHeaderCart.bind(this))})),t.button.addEventListener("click",(e=>{e.stopImmediatePropagation(),this.cart.cartItems.has(t.data.id)?(this.cart.cartItems.delete(t.data.id),t.button.style.backgroundColor="",t.button.innerText="Add to cart",this.cart.cartItems.delete(t.data.id),this.refreshHeaderCart()):(this.cart.cartItems.set(t.data.id,1),t.button.style.backgroundColor="#730600",t.button.innerText="Remove",this.cart.cartItems.set(t.data.id,1),this.refreshHeaderCart())}))}))}openItemPageFromCartEvent(){this.cart.view.itemsList.addEventListener("click",(t=>{if(t.target instanceof HTMLElement&&Boolean(t.target.dataset.id)){const e=this.appView.searchPage.gallery.galleryItems.cards.get(Number(t.target.dataset.id));void 0!==e&&(this.contentClass=new E(this.cart,e),this.contentClass.cart=this.cart,this.appView.containerContent=this.contentClass.view.container,this.cart.cartItems.has(e.data.id)&&(this.contentClass.view.addButton.innerText="Remove",this.contentClass.view.addButton.style.backgroundColor="#730600"),this.contentClass.view.addButton.addEventListener("click",this.refreshHeaderCart.bind(this)))}}))}updateCardsButtonState(){this.appView.searchPage.gallery.galleryItems.cards.forEach((t=>{this.cart.cartItems.has(t.data.id)||(t.button.style.backgroundColor="",t.button.innerText="Add to cart")}))}generateSearchPageContent(){this.contentClass=this.appView.searchPage,this.addCardEvents(),this.appView.containerContent=this.contentClass.container}goToMainPage(){this.contentClass=this.appView.searchPage,this.appView.containerContent=this.contentClass.container,this.updateCardsButtonState()}refreshHeaderCart(){this.appView.header.totalAmount=this.cart.priceSum,this.appView.header.basketScoreAmount=this.cart.itemsAmount}}})();